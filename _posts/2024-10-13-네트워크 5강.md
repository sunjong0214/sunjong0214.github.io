---
title : network 5강 - Link layer
category : [CS, network]
tags : [cs, network]
---



## Link layer

- 지금까지 패킷을 라우터를 통해 어떻게 dest로 보내는지에 대해 설명했다.
- 실제로 우리가 패킷을 만들어서 통신하기 위해서는 처음 네트워크 밖으로 보내는 라우터인 게이트웨이 라우터에게 패킷을 보내거나 라우터에서 라우터로 패킷을 보낼 때 어떤 방식으로 보낼까?
- 네트워크 안에서는 라우터와 라우터 간 1대1로 매칭되어 연결되어있는 것이 아니라 하나의 라우터에 여러 라우터가 연결되어있다.
- 그럴 상황에서 라우터가 라우터에게 패킷을 보내고자 할 때 결국 이 패킷이란 것은 파장이므로 연결되어있는 모든 곳에 퍼지게 된다. (우리가 말할 때 공기에 퍼지듯)
- 근데 여기서 한 라우터에 패킷을 보내는 도중에 또 다른 라우터가 패킷을 보내면 어떻게 될까? 패킷은 파장이라 모든 곳에 퍼진다고 했다.
- 첫번째 보낸 패킷과 다른 라우터에서 보낸 두번째 패킷이 서로 섞이면서 알아볼 수 없게 된다. 이런 현상을 collision이라고 하며 이 링크 레이어에서 가장 중요하게 하는 일은 collision을 발생하지 않게 하고, 발생했다면 해결하는 일을 한다.

## Medium Access Control(MAC)

- 여러명이 한 매체를 공유하는 상황(multiple access)에서 패킷을 전송할 때 충돌이 안 나게 컨트롤하는 것을 MAC이라고 한다. 

#### Time Division multiple access(TDMA)

- MAC protocol 중 하나로 시간을 쪼개서 multiple access 상황을 해결

  ![image](https://github.com/user-attachments/assets/ab05de87-d47c-4558-baec-c2ab47e95443)

- slot의 수보다 사용자가 적으면 리소스가 낭비

- 이와 비슷한 MAC protocol로 FDMA가 있는데 TDMA와의 차이는 시간 대신 전자파를 이용한 방식으로 비슷한 장단점을 가진다.

#### Random access protocol

![image](https://github.com/user-attachments/assets/9bb99ca7-af46-4179-bc87-88f9b962920c)

- TDMA와 다르게 보내고 싶을 때 보내는 방식
- Random access protocols는 충돌이 발생하는데 이 충돌을 어떻게 감지하고 해결하는 것이 핵심이다.

#### CSMA

- Random access protocol로 패킷을 전송하기 전에 누군가 전송하고 있는지 확인하고, 없다면 전송을 시작하는 프로토콜이다.
- 하지만 CSMA도 충돌이 발생하는 경우가 있다.

![image](https://github.com/user-attachments/assets/fd8120e7-2db2-4ff6-8644-7096353ed760)

- 위 그림과 같은 상황에서 collision이 발생한다. propagation delay때문에 발생하는데 이 delay는 해결할 수 없는 문제이기 때문에  CSMA를 사용하면 충돌은 피할 수 없다고 결론이 났다.

- 이런 문제를 완화하기 위해 충돌이 감지되는 순간 전송을 멈추는 방식이 CSMA를 업그레이드한 CSMA/CD이다. (CSMA는 멈추지 않고 끝까지 전송)

- 하지만 이 CSMA/CD도 애매한 부분이 있다. 바로 충돌을 감지해서 전송을 멈춘 뒤 누가 먼저 전송을 시작할 것 인가이다.

- 이를 이해 도입한 방법이 `binary backoff` 이다.

  ![image](https://github.com/user-attachments/assets/8e2e8c1d-6285-4bb4-b500-fdd2502facd7)

  - 충돌이 m번 발생했을 때 2^m-1 만큼의 수열 중 랜덤한 숫자를 고르고 그 수만큼 기다린 후 전송하는 방식이다.
  - 첫번째 충돌 : {0, 1} 중 선택, 2번째 충돌 : {0, 1, 2, 3} 중 선택

- 주변에 같은 와이파이를 쓰는 사람이 많으면 인터넷 속도가 느려지는 이유가 바로 binary backoff 때문이다. (사람이 많으면 많을 수록 길어짐)

- 우리가 평소에 사용하는 Ethernet은 이 CSMA/CD를 사용한다.



출처)

[컴퓨터네트워크 - 한양대학교 | KOCW 공개 강의](http://www.kocw.net/home/search/kemView.do?kemId=1169634)